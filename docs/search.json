[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Um Curso Pr√°tico de Acessibilidade Urbana em R",
    "section": "",
    "text": "1 Introdu√ß√£o √† oficina\nEste site apresenta o material de apoio para a oficina ‚ÄúUm Curso Pr√°tico de Acessibilidade Urbana em R‚Äù. A oficina ser√° realizada como parte da programa√ß√£o do 39o Congresso de Pesquisa e Ensino em Transportes, em Goi√¢nia em novembro de 2025. A oficina √© patrocinada pela Associa√ß√£o Nacional de Pesquisa e Ensino em Transportes (ANPET).",
    "crumbs": [
      "<span class='chapter-number'>1</span>¬† <span class='chapter-title'>Introdu√ß√£o √† oficina</span>"
    ]
  },
  {
    "objectID": "index.html#bio-do-instrutor",
    "href": "index.html#bio-do-instrutor",
    "title": "Um Curso Pr√°tico de Acessibilidade Urbana em R",
    "section": "4.1 Bio do instrutor:",
    "text": "4.1 Bio do instrutor:\nRafael H. M. Pereira √© pesquisador s√™nior nas √°reas de planejamento urbano, ci√™ncia de dados espaciais e mobilidade urbana no Instituto de Pesquisa Econ√¥mica Aplicada (Ipea), e professor visitante da Universidade de Toronto. Sua pesquisa investiga como as pol√≠ticas urbanas e tecnologias moldam a organiza√ß√£o espacial das cidades, a mobilidade humana, bem como seus impactos nas desigualdades sociais e de sa√∫de. Algumas de suas contribui√ß√µes nos campos de urban analytics e planejamento envolvem o desenvolvimento de novos m√©todos e ferramentas computacionais de c√≥digo aberto para o estudo de sistemas urbanos e redes de transporte. Essas contribui√ß√µes partem de interesses substantivos sobre quest√µes de equidade no planejamento urbano, desigualdades de acesso a oportunidades, e dos impactos ambientais gerados pelo ambiente constru√≠do e por padr√µes de mobilidade. Com gradua√ß√£o em sociologia pela UnB e mestrado em demografia pela Unicamp, Rafael Pereira obteve seu PhD em geografia pela Universidade de Oxford.\n\n\n\n\nKarner, Alex, Rafael H. M. Pereira, e Steven Farber. 2024. ¬´Advances and Pitfalls in Measuring Transportation Equity¬ª. Transportation, janeiro. https://doi.org/10.1007/s11116-023-10460-7.\n\n\nLevinson, David, e David King. 2020. Transport Access Manual: A Guide for Measuring Connection between People and Places. Committee of the Transport Access Manual, University of Sydney. https://ses.library.usyd.edu.au/handle/2123/23733.\n\n\nPereira, Rafael H. M., e Daniel Herszenhut. 2023. Introduction to urban accessibility: a practical guide with R. 1.¬™ ed. Instituto de Pesquisa Econ√¥mica Aplicada (Ipea). https://doi.org/10.38116/9786556350653.\n\n\nPereira, Rafael H. M., Marcus Saraiva, Daniel Herszenhut, Carlos Kaue Vieira Braga, e Matthew Wigginton Conway. 2021. ¬´R5r: Rapid Realistic Routing on Multimodal Transport Networks with R5 in R¬ª. Transport Findings, mar√ßo, 21262. https://doi.org/10.32866/001c.21262.",
    "crumbs": [
      "<span class='chapter-number'>1</span>¬† <span class='chapter-title'>Introdu√ß√£o √† oficina</span>"
    ]
  },
  {
    "objectID": "2.1_installation.html",
    "href": "2.1_installation.html",
    "title": "2¬† Instala√ß√£o",
    "section": "",
    "text": "2.1 Instalando R e RStudio\nAssumimos que voc√™ j√° tenha o R e o RStudio instalados em sua m√°quina. Caso n√£o tenha, siga estas instru√ß√µes simples aqui.",
    "crumbs": [
      "Primeiros passos",
      "<span class='chapter-number'>2</span>¬† <span class='chapter-title'>Instala√ß√£o</span>"
    ]
  },
  {
    "objectID": "2.1_installation.html#instalando-pacotes-de-r",
    "href": "2.1_installation.html#instalando-pacotes-de-r",
    "title": "2¬† Instala√ß√£o",
    "section": "2.2 Instalando pacotes de R",
    "text": "2.2 Instalando pacotes de R\nO workshop utiliza alguns pacotes em R que precisam ser instalados em sua m√°quina. A maneira mais simples de fazer isso √© executando o c√≥digo abaixo. Isso pode levar alguns minutos se for a primeira vez que voc√™ instala esses pacotes.\n\npkgs &lt;- c(\n  'r5r',\n  'accessibility',\n  'aopdata',\n  'rJavaEnv',\n  'ggplot2',\n  'mapview',\n  'quantreg',\n  'dplyr',\n  'h3jsr',\n  'sf'\n  )\n\ninstall.packages(pkgs)",
    "crumbs": [
      "Primeiros passos",
      "<span class='chapter-number'>2</span>¬† <span class='chapter-title'>Instala√ß√£o</span>"
    ]
  },
  {
    "objectID": "2.1_installation.html#instalando-java",
    "href": "2.1_installation.html#instalando-java",
    "title": "2¬† Instala√ß√£o",
    "section": "2.3 Instalando Java",
    "text": "2.3 Instalando Java\nPara usar o pacote {r5r} (vers√£o v2.0 ou superior), voc√™ precisar√° ter o Java Development Kit (JDK) 21 instalado em seu computador. Existem diversas implementa√ß√µes de JDK de c√≥digo aberto. A maneira mais f√°cil de instalar o JDK √© utilizando o novo pacote {rJavaEnv} no R, desenvolvido por Egor Kotov (obrigado, Egor!).\n\n# checa se tem alguma versao do Java instalado \nrJavaEnv::java_check_version_rjava()\n\n## se esta √© a primeira vez que voc√™ usa o {rJavaEnv}, talvez seja \n## necess√°rio executar o c√≥digo abaixo para consentir a instala√ß√£o do Java\nrJavaEnv::rje_consent(provided = TRUE)\n\n# instala Java 21\nrJavaEnv::java_quick_install(version = 21)\n\n# check if Java was successfully installed\nrJavaEnv::java_check_version_rjava()\n\nAlternativamente, voc√™ pode baixar e instalar manualmente qualquer uma dessas implementa√ß√µes de JDK:\n\nAdoptium/Eclipse Temurin\nAmazon Corretto\nOracle OpenJDK\n\nAqui est√£o alguns slides complementares explicando os requisitos computacionais para realizar an√°lises de roteamento e acessibilidade de transporte com R.",
    "crumbs": [
      "Primeiros passos",
      "<span class='chapter-number'>2</span>¬† <span class='chapter-title'>Instala√ß√£o</span>"
    ]
  },
  {
    "objectID": "2.2_data_requirements.html",
    "href": "2.2_data_requirements.html",
    "title": "3¬† Dados necess√°rios",
    "section": "",
    "text": "3.1 Rede vi√°ria\nPara realizar an√°lises de roteamento e acessibilidade de transporte usando o pacote {r5r}, voc√™ precisar√° de alguns conjuntos de dados de input:\nOs dados que usaremos nesta oficina s√£o fornecidos junto com os c√≥digo do curso. Se voc√™ gostaria de encontrar dados semelhantes para outras regi√µes do Brasil e do mundo, aqui est√£o algumas fontes de dados. Veja tamb√©m os slides abaixo.",
    "crumbs": [
      "Primeiros passos",
      "<span class='chapter-number'>3</span>¬† <span class='chapter-title'>Dados necess√°rios</span>"
    ]
  },
  {
    "objectID": "2.2_data_requirements.html#rede-vi√°ria",
    "href": "2.2_data_requirements.html#rede-vi√°ria",
    "title": "3¬† Dados necess√°rios",
    "section": "",
    "text": "Rede vi√°ria (obrigat√≥rio):\n\n{osmextract}, pacaote de R;\nGeofabrik, website;\nHOT Export Tool, website;\nBBBike Extract Service, website.\nProtomaps website",
    "crumbs": [
      "Primeiros passos",
      "<span class='chapter-number'>3</span>¬† <span class='chapter-title'>Dados necess√°rios</span>"
    ]
  },
  {
    "objectID": "2.2_data_requirements.html#rede-de-transporte-p√∫blico",
    "href": "2.2_data_requirements.html#rede-de-transporte-p√∫blico",
    "title": "3¬† Dados necess√°rios",
    "section": "3.2 Rede de transporte p√∫blico",
    "text": "3.2 Rede de transporte p√∫blico\n\nRede de transporte p√∫blico (optional):\n\n{tidytransit},pacote de R;\nTransitland, website;\nMobility Database website",
    "crumbs": [
      "Primeiros passos",
      "<span class='chapter-number'>3</span>¬† <span class='chapter-title'>Dados necess√°rios</span>"
    ]
  },
  {
    "objectID": "2.2_data_requirements.html#topografia",
    "href": "2.2_data_requirements.html#topografia",
    "title": "3¬† Dados necess√°rios",
    "section": "3.3 Topografia",
    "text": "3.3 Topografia\n\nTopografia (opcional):\n\n{elevatr}, pacote de R;\nNasa‚Äôs SRTMGL1, website.",
    "crumbs": [
      "Primeiros passos",
      "<span class='chapter-number'>3</span>¬† <span class='chapter-title'>Dados necess√°rios</span>"
    ]
  },
  {
    "objectID": "3.1_quick_approach.html",
    "href": "3.1_quick_approach.html",
    "title": "4¬† Aborgadem r√°pida",
    "section": "",
    "text": "4.1 Uma vis√£o r√°pida dos nossos dados de exemplo\nNesta primeira se√ß√£o pr√°tica da oficina, aprenderemos uma maneira r√°pida e simples de calcular a acessibilidade espacial usando o pacote {r5r}. Na pr√≥xima se√ß√£o, veremos uma maneira mais flex√≠vel e robusta de fazer a mesma coisa.\nAqui, n√≥s vamos calcular o n√∫mero de escolas acess√≠veis por transporte p√∫blico em um tempo de viagem de at√© 20 minutos.\nPrimeiro, vamos aumentar a mem√≥ria dispon√≠vel para executar o Java, que √© usado pelo programa roteamento R5. Para aumentar a mem√≥ria dispon√≠vel para 4 GB, por exemplo, usamos o seguinte comando. Observe que isso precisa ser executado antes de carregar os pacotes que ser√£o usados em nossa an√°lise.\nAgora podemos carregar os pacotes que usaremos nesta se√ß√£o:\nNosso estudo de caso √© a cidade de Porto Alegre, Brasil. O pacote {r5r} traz uma pequena amostra de dados para esta cidade, incluindo os seguintes arquivos:\nEsses conjuntos de dados devem ser salvos em um √∫nico diret√≥rio (nosso data_path). Aqui est√° um exemplo de como os dados de uso do solo se parecem:\n# path to data directory\ndata_path &lt;- system.file(\"extdata/poa\", package = \"r5r\")\n\n# read points data\npoints &lt;- read.csv(file.path(data_path, \"poa_hexgrid.csv\"))\nhead(points)\n\n               id       lon       lat population schools jobs healthcare\n1 89a901291abffff -51.15825 -30.05385          0       0 1214          0\n2 89a9012a3cfffff -51.21187 -30.10058        159       0    0          0\n3 89a901295b7ffff -51.16521 -30.07544       1008       0    3          1\n4 89a901284a3ffff -51.20535 -30.09005         92       0    0          0\n5 89a9012809bffff -51.19575 -30.07839        577       0    9          0\n6 89a901285cfffff -51.21108 -30.08124       1170       0  427          0\nüîé Para visualizar a distribui√ß√£o espacial desses dados, podemos recuperar a geometria da grade hexagonal H3 e explor√°-la usando um mapa interativo:\n# retrieve polygons of H3 spatial grid\ngrid &lt;- h3jsr::cell_to_polygon(\n  points$id,\n  simple = FALSE\n  )\n\n# merge spatial grid with land use data\ngrid_poa &lt;- left_join(\n  grid,\n  points,\n  by = c('h3_address'='id')\n  )\n\n# interactive map\nmapview(grid_poa, zcol = 'population')",
    "crumbs": [
      "Calculando acessibilidade",
      "<span class='chapter-number'>4</span>¬† <span class='chapter-title'>Aborgadem r√°pida</span>"
    ]
  },
  {
    "objectID": "3.1_quick_approach.html#uma-vis√£o-r√°pida-dos-nossos-dados-de-exemplo",
    "href": "3.1_quick_approach.html#uma-vis√£o-r√°pida-dos-nossos-dados-de-exemplo",
    "title": "4¬† Aborgadem r√°pida",
    "section": "",
    "text": "Uma rede OpenStreetMap: poa_osm.pbf\nDois feeds GTFS de transporte p√∫blico: poa_eptc.zip (√¥nibus) e poa_trensurb.zip (trens)\nUm dado de eleva√ß√£o em formato raster: poa_elevation.tif\nUm data.frame com dados de uso do solo: o arquivo poa_hexgrid.csv, com os centr√≥ides de uma grade hexagonal regular cobrindo a √°rea da amostra. O data frame tamb√©m indica o n√∫mero de residentes e escolas em cada c√©lula. Usaremos esses pontos como origens e destinos em nossa an√°lise.",
    "crumbs": [
      "Calculando acessibilidade",
      "<span class='chapter-number'>4</span>¬† <span class='chapter-title'>Aborgadem r√°pida</span>"
    ]
  },
  {
    "objectID": "3.1_quick_approach.html#construindo-uma-rede-de-transporte-rote√°vel",
    "href": "3.1_quick_approach.html#construindo-uma-rede-de-transporte-rote√°vel",
    "title": "4¬† Aborgadem r√°pida",
    "section": "4.2 Construindo uma rede de transporte rote√°vel",
    "text": "4.2 Construindo uma rede de transporte rote√°vel\nEssa abordagem r√°pida para calcular a acessibilidade envolve apenas 2 etapas. A primeira etapa √© construir a rede de transporte multimodal usando a fun√ß√£o r5r::build_network().\n\nr5r_network &lt;- r5r::build_network(data_path, verbose = FALSE)\n\nComo voc√™ pode ver, s√≥ precisamos passar o caminho da nossa pasta de dados para a fun√ß√£o r5r::build_network(). A fun√ß√£o ent√£o combina os dados OSM, GTFS e de eleva√ß√£o nesse diret√≥rio para criar um grafo que √© usado para roteamento de viagens entre pares de origem e destino e, consequentemente, para calcular matrizes de tempo de viagem e acessibilidade.",
    "crumbs": [
      "Calculando acessibilidade",
      "<span class='chapter-number'>4</span>¬† <span class='chapter-title'>Aborgadem r√°pida</span>"
    ]
  },
  {
    "objectID": "3.1_quick_approach.html#calculando-acessibilidade-abordagem-r√°pida",
    "href": "3.1_quick_approach.html#calculando-acessibilidade-abordagem-r√°pida",
    "title": "4¬† Aborgadem r√°pida",
    "section": "4.3 Calculando acessibilidade: abordagem r√°pida",
    "text": "4.3 Calculando acessibilidade: abordagem r√°pida\nNa segunda etapa, voc√™ pode calcular estimativas de acessibilidade em uma √∫nica chamada usando a fun√ß√£o r5r::accessibility(). Ela inclui diferentes op√ß√µes de fun√ß√µes de decaimento para calcular medidas cumulativas de acessibilidade e diferentes medidas gravitacionais.\nNeste exemplo, n√≥s vamos calculamos a acessibilidade cumulativa do n√∫mero de escolas e hospitais acess√≠veis em menos de 20 minutos por transporte p√∫blico. Assim, usaremos decay_function = \"step\".\nObserve que, para usar r5r::accessibility(), o par√¢metro points deve ser um data.frame com colunas que indiquem:\n\no id de cada local\ncoordenadas espaciais lat e lon\no n√∫mero de atividades em cada local. O nome desta coluna deve ser passado para o par√¢metro opportunities_colnames.\n\n\n# routing inputs\nmode &lt;- c(\"walk\", \"transit\")\n1max_walk_time &lt;- 30\ntravel_time_cutoff &lt;- 20\ndeparture_datetime &lt;- as.POSIXct(\"13-05-2019 14:00:00\",\n                                 format = \"%d-%m-%Y %H:%M:%S\")\n\n# calculate accessibility\naccess1 &lt;- r5r::accessibility(\n  r5r_network = r5r_network,\n  origins = points,\n  destinations = points,\n  mode = mode,\n2  opportunities_colnames = c(\"schools\", \"healthcare\"),\n  decay_function = \"step\",\n3  cutoffs = travel_time_cutoff,\n  departure_datetime = departure_datetime,\n  max_walk_time = max_walk_time,\n  progress = TRUE\n  )\n\n\n1\n\nEm minutos\n\n\n2\n\nObserve que voc√™ pode passar as colunas de mais de um tipo de oportunidade.\n\n\n3\n\nDa mesma forma, voc√™ poderia passar mais de um limite de tempo.\n\n\n\n\n\n\n\n\n\n\nDica\n\n\n\nObserve que a fun√ß√£o r5r::accessibility() possui v√°rios par√¢metros adicionais que permitem especificar diferentes caracter√≠sticas das viagens, incluindo uma dura√ß√£o m√°xima, velocidade de caminhada e sw bicicleta, n√≠vel toler√¢ncia ao estresse do tr√°fego (LTS), etc. Para mais informa√ß√µes, consulte a documenta√ß√£o da fun√ß√£o chamando ?r5r::accessibility no seu console R ou acesse a documenta√ß√£o no site do {r5r}.\n\n\nO output da fun√ß√£o r5r::accessibility() √© um data.frame que mostra, para cada origem id, o n√∫mero de oportunidades que podem ser alcan√ßadas:\n\nhead(access1)\n\n                id opportunity percentile cutoff accessibility\n            &lt;char&gt;      &lt;char&gt;      &lt;int&gt;  &lt;int&gt;         &lt;num&gt;\n1: 89a901291abffff     schools         50     20             4\n2: 89a901291abffff  healthcare         50     20             6\n3: 89a9012a3cfffff     schools         50     20             0\n4: 89a9012a3cfffff  healthcare         50     20             0\n5: 89a901295b7ffff     schools         50     20             8\n6: 89a901295b7ffff  healthcare         50     20             4",
    "crumbs": [
      "Calculando acessibilidade",
      "<span class='chapter-number'>4</span>¬† <span class='chapter-title'>Aborgadem r√°pida</span>"
    ]
  },
  {
    "objectID": "3.1_quick_approach.html#mapa-de-acessibilidade",
    "href": "3.1_quick_approach.html#mapa-de-acessibilidade",
    "title": "4¬† Aborgadem r√°pida",
    "section": "4.4 Mapa de acessibilidade",
    "text": "4.4 Mapa de acessibilidade\nAgora √© muito simples unir essas estimativas de acessibilidade √† nossa grade espacial para visualizar esses resultados em um mapa.\n\n# merge spatial grid with accessibility estimates\naccess_sf &lt;- left_join(\n  grid, \n  access1, \n  by = c('h3_address'='id')\n  )\n\n# plot\nggplot() +\n  geom_sf(data = access_sf, aes(fill = accessibility), color= NA) +\n  scale_fill_viridis_c(direction = -1, option = 'B') +\n  labs(title = 'N√∫mero de escolas e hospitais acess√≠veis por transporte p√∫blico em 20 minutos',\n       fill = 'N√∫mero de\\nestabelecimentos') +\n  theme_minimal() +\n  theme(axis.title = element_blank()) +\n  facet_wrap(~opportunity) +\n  theme_void()",
    "crumbs": [
      "Calculando acessibilidade",
      "<span class='chapter-number'>4</span>¬† <span class='chapter-title'>Aborgadem r√°pida</span>"
    ]
  },
  {
    "objectID": "3.2_flexible_approach.html",
    "href": "3.2_flexible_approach.html",
    "title": "5¬† Abordagem flex√≠vel",
    "section": "",
    "text": "5.1 Construindo uma rede de transporte rote√°vel\nNa se√ß√£o anterior, n√≥s aprendemos uma ‚Äòabordagem r√°pida‚Äô para calcular a acessibilidade diretamente dentro do {r5r}. Uma limita√ß√£o dessa abordagem √© que ela se restringe apenas a algumas m√©tricas de acessibilidade predefinidas dispon√≠veis no {r5r}. Frequentemente, queremos analisar outros tipos de m√©tricas de acessibilidade e/ou ter mais controle sobre as diferentes etapas da an√°lise.\nNesta se√ß√£o, aprenderemos como calcular matrizes de tempo de viagem e us√°-las para calcular diferentes tipos de m√©tricas de acessibilidade. Esta √© uma abordagem mais ‚Äòflex√≠vel‚Äô que combina os pacotes {r5r} e {accessibility}. Usaremos novamente os dados de exemplo da cidade de Porto Alegre, Brasil, que v√™m com o pacote {r5r}.\nEsta abordagem flex√≠vel para calcular a acessibilidade envolve apenas 3 etapas:\nAgora vamos come√ßar carregando os pacotes necess√°rios:\nPrimeiro, constru√≠mos a rede de transporte multimodal passando o caminho da nossa pasta com de dados para a fun√ß√£o r5r::build_network().\n# path to data directory\ndata_path &lt;- system.file(\"extdata/poa\", package = \"r5r\")\n\n# build network\nr5r_network &lt;- r5r::build_network(data_path, verbose = FALSE)",
    "crumbs": [
      "Calculando acessibilidade",
      "<span class='chapter-number'>5</span>¬† <span class='chapter-title'>Abordagem flex√≠vel</span>"
    ]
  },
  {
    "objectID": "3.2_flexible_approach.html#calculando-uma-matriz-de-tempo-de-viagem",
    "href": "3.2_flexible_approach.html#calculando-uma-matriz-de-tempo-de-viagem",
    "title": "5¬† Abordagem flex√≠vel",
    "section": "5.2 Calculando uma matriz de tempo de viagem",
    "text": "5.2 Calculando uma matriz de tempo de viagem\nA segunda etapa √© calcular uma matriz de tempo de viagem com estimativas de porta-a-porta de todas as origens para todos os destinos. Para isso, usamos a fun√ß√£o r5r::travel_time_matrix().\nEssa fun√ß√£o recebe como input a rede rote√°vel criada acima, pontos de origem e destino como data.frames com colunas id, lon e lat, o modo de transporte e o hor√°rio de partida.\n\n# read points data\npoints &lt;- read.csv(file.path(data_path, \"poa_hexgrid.csv\"))\n\n# routing inputs\nmode &lt;- c(\"walk\", \"transit\")\n1max_trip_duration &lt;- 30\ndeparture_datetime &lt;- as.POSIXct(\"13-05-2019 14:00:00\",\n                                 format = \"%d-%m-%Y %H:%M:%S\")\n\n# calculate travel time matrix\nttm &lt;- r5r::travel_time_matrix(\n  r5r_network = r5r_network,\n  origins = points,\n  destinations = points,\n  mode = mode,\n  departure_datetime = departure_datetime,\n  max_trip_duration = max_trip_duration,\n  progress = TRUE\n  )\n\n\n1\n\nEm minutos\n\n\n\n\n\n\n\n\n\n\nDica\n\n\n\nObserve que a fun√ß√£o r5r::travel_time_matrix() inclui v√°rios par√¢metros adicionais que permitem especificar algumas caracter√≠sticas da viagem, como tempo m√°ximo de caminhada, uma janela de hor√°rio de partida, o n√∫mero m√°ximo de trechos de transporte p√∫blico permitidos, etc. Para mais informa√ß√µes, consulte a documenta√ß√£o da fun√ß√£o chamando ?r5r::travel_time_matrix no Console no R ou acesse a documenta√ß√£o no site do {r5r}.\n\n\nO output √© um data.frame, com essa cara abaixo. √â uma matriz em formato longo com as colunas from_id, to_id e uma terceira coluna indicando o tempo de viagem (em minutos) para cada par de origem e destino.\n\nhead(ttm)\n\n           from_id           to_id travel_time_p50\n            &lt;char&gt;          &lt;char&gt;           &lt;int&gt;\n1: 89a901291abffff 89a901291abffff               1\n2: 89a901291abffff 89a90129157ffff              25\n3: 89a901291abffff 89a9012956bffff              29\n4: 89a901291abffff 89a90128257ffff              27\n5: 89a901291abffff 89a90129ed3ffff              29\n6: 89a901291abffff 89a9012913bffff              17\n\n\n\n\n\n\n\n\nVelocidade de processamento\n\n\n\nA fun√ß√£o travel_time_matrix() utiliza uma extens√£o do algoritmo de roteamento RAPTOR (Conway, Byrd, e van der Linden 2017), o que torna o R5 extremamente r√°pido. Dependendo do n√∫mero de pares de origem e destino, o {r5r} pode calcular matrizes de tempo de viagem entre 6 e 200 vezes mais r√°pido do que outros programas de roteamento multimodal (Higgins et al. 2022).",
    "crumbs": [
      "Calculando acessibilidade",
      "<span class='chapter-number'>5</span>¬† <span class='chapter-title'>Abordagem flex√≠vel</span>"
    ]
  },
  {
    "objectID": "3.2_flexible_approach.html#calculating-accessibility",
    "href": "3.2_flexible_approach.html#calculating-accessibility",
    "title": "5¬† Abordagem flex√≠vel",
    "section": "5.3 Calculating accessibility",
    "text": "5.3 Calculating accessibility\n\nDepois de calcular uma matriz de tempo de viagem, podemos combin√°-la com dados de uso do solo para calcular a acessibilidade. Para isso, usaremos o pacote {accessibility}, que oferece fun√ß√µes r√°pidas e convenientes para calcular v√°rias medidas de acessibilidade.\nO pacote atualmente inclui mais de 7 tipos diferentes de medidas de acessibilidade (veja os detalhes no site de documenta√ß√£o do pacote).\n\ncost_to_closest(): Custo m√≠nimo de viagem at√© as N oportunidades mais pr√≥ximas\ncumulative_cutoff(): Acesso cumulativo com base em um limite de tempo de viagem\ncumulative_interval(): Acesso cumulativo com base em um intervalo de tempo de viagem\ngravity(): Medidas de acessibilidade gravitacioinais\nfloating_catchment_area(): √Årea de capta√ß√£o flutuante\nspatial_availability(): Disponibilidade espacial\nbalancing_cost(): Medida de acessibilidade de custo de balanceamento\n\nTodas as fun√ß√µes do pacote recebem como input (a) uma matriz de custos pr√©-calculada - no nosso caso, uma matriz de tempo de viagem, e (b) alguns dados de uso do solo com o n√∫mero de oportunidades (por exemplo, escolas, empregos) em cada c√©lula da √°rea de estudo. Ambos os dados devem estar organizados no formato data.frame. Vimos acima a estrutura da matriz de viagem. O data.frame de uso do solo deve estar organizado assim:\n\n# land use data\n1head(points)\n\n\n1\n\nOs dados de uso do solo devem conter uma coluna id, referindo-se aos ids listados na matriz de viagem, e o n√∫mero de oportunidades em cada local.\n\n\n\n\n               id       lon       lat population schools jobs healthcare\n1 89a901291abffff -51.15825 -30.05385          0       0 1214          0\n2 89a9012a3cfffff -51.21187 -30.10058        159       0    0          0\n3 89a901295b7ffff -51.16521 -30.07544       1008       0    3          1\n4 89a901284a3ffff -51.20535 -30.09005         92       0    0          0\n5 89a9012809bffff -51.19575 -30.07839        577       0    9          0\n6 89a901285cfffff -51.21108 -30.08124       1170       0  427          0\n\n\nAgora vamos calcular alguns indicadores de acessibilidade.\n\n5.3.1 Medida de acessibilidade cumulativa\n\n5.3.1.1 Acessibilidade cumulativa baseada em limite de tempo\nPara calcular uma medida tradicional de acessibilidade cumulativa, podemos usar a fun√ß√£o accessibility::cumulative_cutoff(). Junto com a matriz de viagem e os conjuntos de dados de uso do solo, precisamos apenas passar o nome da coluna com os valores de tempo de viagem, o nome da coluna com a contagem de oportunidades e um limite de tempo de viagem.\nAqui, calculamos o n√∫mero de escolas acess√≠veis em 20 minutos.\n\n# threshold-based cumulative accessibility\naccess_cum_t &lt;- accessibility::cumulative_cutoff(\n  travel_matrix = ttm, \n  land_use_data = points,\n  travel_cost = 'travel_time_p50',\n  opportunity = 'schools',\n  cutoff = 20\n  )\n  \nhead(access_cum_t)\n\n                id schools\n            &lt;char&gt;   &lt;int&gt;\n1: 89a9012124fffff       3\n2: 89a9012126bffff       3\n3: 89a9012127bffff       3\n4: 89a90128003ffff       9\n5: 89a90128007ffff       7\n6: 89a9012800bffff      11\n\n\n\n\n\n5.3.2 Acessibilidade cumulativa baseada em intervalo de tempo\nEstudos anteriores mostraram que a escolha ad hoc de um √∫nico limite de tempo de viagem pode influenciar substancialmente os resultados das medidas tradicionais de acessibilidade cumulativa, introduzindo vi√©s nas avalia√ß√µes de projetos de transporte e an√°lises de equidade (Pereira 2019). Para superar esse problema, propusemos uma medida de acessibilidade cumulativa com intervalo de tempo (Tomasiello et al. 2023). Essa nova m√©trica estima o n√∫mero m√©dio (ou mediano) de oportunidades que podem ser alcan√ßadas considerando m√∫ltiplos limites minuto a minuto dentro de um intervalo de tempo de viagem.\nA principal vantagem dessa m√©trica √© que ela mitiga os impactos de escolhas arbitr√°rias de dura√ß√£o de viagem na an√°lise de acessibilidade, enquanto preserva as vantagens de c√°lculo e comunicabilidade das medidas cumulativas baseadas em limites.\nAqui, calculamos o n√∫mero m√©dio de escolas que podem ser alcan√ßadas entre 15 e 25 minutos.\n\n# interval-based cumulative accessibility\naccess_cum_i &lt;- accessibility::cumulative_interval(\n  travel_matrix = ttm, \n  land_use_data = points,\n  travel_cost = 'travel_time_p50',\n  opportunity = 'schools',\n  interval = c(15, 25),\n  summary_function = mean\n  )\n  \nhead(access_cum_i)\n\n                id schools\n            &lt;char&gt;   &lt;int&gt;\n1: 89a9012124fffff       4\n2: 89a9012126bffff       4\n3: 89a9012127bffff       4\n4: 89a90128003ffff       8\n5: 89a90128007ffff      10\n6: 89a9012800bffff      10\n\n\n\n\n\n5.3.3 Medidas de acessibilidade baseadas em gravidade\nO pacote tamb√©m inclui a fun√ß√£o accessibility::gravity() para calcular m√©tricas de acessibilidade baseadas em gravidade de forma muito flex√≠vel.\nEla possui um par√¢metro decay_function que pode receber qualquer fun√ß√£o para converter o custo de viagem em um fator de imped√¢ncia usado para ponderar as oportunidades. Para conveni√™ncia, o pacote atualmente inclui as seguintes fun√ß√µes:\n\ndecay_binary()\ndecay_exponential()\ndecay_linear()\ndecay_logistic()\ndecay_power()\ndecay_stepped()\n\nVamos ver alguns exemplos com as fun√ß√µes de decaimento log√≠stico e exponencial negativo:\n\n# logistic decay\naccess_lgst &lt;- gravity(\n  travel_matrix = ttm,\n  land_use_data = points,\n  decay_function = decay_logistic(cutoff = 15, sd = 5),\n  opportunity = \"schools\",\n  travel_cost = \"travel_time_p50\"\n)\n\n# negative exponential decay\naccess_nexp &lt;- gravity(\n  travel_matrix = ttm,\n  land_use_data = points,\n  decay_function = decay_exponential(decay_value = 0.1),\n  opportunity = \"schools\",\n  travel_cost = \"travel_time_p50\"\n)\n\nAqui est√° uma r√°pida visualiza√ß√£o da forma das curvas de decaimento que utilizamos.\n\n\nC√≥digo\nnegative_exp &lt;- decay_exponential(decay_value = 0.1)\nlogistic &lt;- decay_logistic(cutoff = 15, sd = 5)\n\ntravel_costs &lt;- seq(0, 30, 0.1)\n\nweights &lt;- data.frame(\n  minutes = travel_costs,\n  negative_exp = negative_exp(travel_costs)[[\"0.1\"]],\n  logistic = logistic(travel_costs)[[\"c15;sd5\"]]\n)\n\n# reshape data to long format\nweights &lt;- tidyr::pivot_longer(\n  weights,\n  cols = c('negative_exp',  'logistic'),\n  names_to = \"decay_function\",\n  values_to = \"weights\"\n)\n\nggplot(weights) +\n  geom_line(aes(minutes, weights, color = decay_function),\n            show.legend = FALSE) +\n  facet_wrap(. ~ decay_function, ncol = 2) +\n  theme_minimal()",
    "crumbs": [
      "Calculando acessibilidade",
      "<span class='chapter-number'>5</span>¬† <span class='chapter-title'>Abordagem flex√≠vel</span>"
    ]
  },
  {
    "objectID": "3.2_flexible_approach.html#mapa-de-acessibilidade",
    "href": "3.2_flexible_approach.html#mapa-de-acessibilidade",
    "title": "5¬† Abordagem flex√≠vel",
    "section": "5.4 Mapa de Acessibilidade",
    "text": "5.4 Mapa de Acessibilidade\nAgora √© muito simples unir todas essas estimativas de acessibilidade √† nossa grade espacial para visualizar esses resultados em um mapa.\n\n# rbind all accessibility results in a single data.frame\naccess_cum_t$metric &lt;- 'cum_threshold'\naccess_cum_i$metric &lt;- 'cum_interval'\naccess_lgst$metric &lt;- 'grav_logistic'\naccess_nexp$metric &lt;- 'grav_exponential'\n\ndf &lt;- rbind(access_cum_t,\n            access_cum_i,\n            access_lgst,\n            access_nexp\n            )\n\n# retrieve polygons of H3 spatial grid\ngrid &lt;- h3jsr::cell_to_polygon(\n  points$id, \n  simple = FALSE\n  )\n\n# merge accessibility estimates\naccess_sf &lt;- left_join(\n  grid, \n  df, \n  by = c('h3_address'='id')\n  )\n\nGerar mapa com visualiza√ß√£o espacial dos resultados\n\nggplot() +\n  geom_sf(data = access_sf, aes(fill = schools), color= NA) +\n  scale_fill_viridis_c(direction = -1, option = 'B') +\n  labs(title = \"Acesso a escolas por transporte p√∫blico usando diferentes m√©tricas de acessibilidade\", fill = \"√çndice de\\nacessibilidade\") +\n  theme_minimal() +\n  theme(axis.title = element_blank()) +\n  facet_wrap(~metric) +\n  theme_void()\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nO pacote {r5r} possui v√°rias funcionalidades avan√ßadas:\n\nConsidera√ß√£o de custos monet√°rios\nConsidera√ß√£o N√≠vel de toler√¢ncia ao Estresse do Tr√°fego (LTS)\nUso de uma janela de partida em vez de um hor√°rio exato\nPlanejamento de viagens com output detalhado\nC√°lculo de is√≥cronas\nGera√ß√£o de outputs que n√£o cabem na mem√≥ria RAM\n\nConsulte as vignettes do pacote no site para mais informa√ß√µes.\n\n\n\n\n\n\n\nConway, Matthew Wigginton, Andrew Byrd, e Marco van der Linden. 2017. ¬´Evidence-Based Transit and Land Use Sketch Planning Using Interactive Accessibility Methods on Combined Schedule and Headway-Based Networks¬ª. Transportation Research Record: Journal of the Transportation Research Board 2653 (1): 45‚Äì53. https://doi.org/10.3141/2653-06.\n\n\nHiggins, Christopher, Matthew Palm, Amber DeJohn, Luna Xi, James Vaughan, Steven Farber, Michael Widener, e Eric Miller. 2022. ¬´Calculating Place-Based Transit Accessibility: Methods, Tools and Algorithmic Dependence¬ª. Journal of Transport and Land Use 15 (1). https://doi.org/10.5198/jtlu.2022.2012.\n\n\nPereira, Rafael H. M. 2019. ¬´Future accessibility impacts of transport policy scenarios: Equity and sensitivity to travel time thresholds for Bus Rapid Transit expansion in Rio de Janeiro¬ª. Journal of Transport Geography 74: 321‚Äì32. https://doi.org/https://doi.org/10.1016/j.jtrangeo.2018.12.005.\n\n\nTomasiello, Diego Bogado, Daniel Herszenhut, Jo√£o Lucas Albuquerque Oliveira, Carlos Kaue Vieira Braga, e Rafael H. M. Pereira. 2023. ¬´A Time Interval Metric for Cumulative Opportunity Accessibility¬ª. Applied Geography 157 (agosto): 103007. https://doi.org/10.1016/j.apgeog.2023.103007.",
    "crumbs": [
      "Calculando acessibilidade",
      "<span class='chapter-number'>5</span>¬† <span class='chapter-title'>Abordagem flex√≠vel</span>"
    ]
  },
  {
    "objectID": "3.3_equity_measures.html",
    "href": "3.3_equity_measures.html",
    "title": "6¬† Medidas de equidade",
    "section": "",
    "text": "7 Medidas de desigualdade\nUma quest√£o central na pesquisa e pr√°tica em transporte envolve avaliar como os benef√≠cios de acessibilidade dos sistemas e projetos de transporte s√£o distribu√≠dos entre diferentes grupos socioecon√¥micos e demogr√°ficos. As preocupa√ß√µes com a equidade no transporte est√£o fundamentalmente relacionadas a dois tipos de quest√µes: (1) desigualdade de acessibilidade e (2) pobreza de acessibilidade. Nesta se√ß√£o, voc√™ aprender√° a usar o pacote {accessibility} para calcular diferentes indicadores de desigualdade e pobreza de acessibilidade.\nEm um artigo recente, discutimos as vantagens e desvantagens de v√°rias m√©tricas de desigualdade e pobreza mais comumente usadas na literatura de transporte (Karner, Pereira, e Farber 2024) - PDF aberto aqui. Os slides abaixo fornecem um resumo muito breve de algumas ideias discutidas no artigo, apenas o suficiente para acompanhar esta se√ß√£o do workshop. No entanto, recomendo fortemente a leitura completa do artigo.\nNesta se√ß√£o, usaremos alguns conjuntos de dados de exemplo para a cidade de Belo Horizonte (Brasil), que acompanham o pacote {accessibility}. No bloco de c√≥digo abaixo, lemos a matriz de tempo de viagem e os dados de uso do solo e calculamos o n√∫mero m√©dio de empregos acess√≠veis em 30 minutos por transporte p√∫blico.\nüîé Hora de uma inspe√ß√£o visual r√°pida! Podemos unir nossos resultados de acessibilidade com os dados de uso do solo/popula√ß√£o e visualizar como a acessibilidade ao emprego √© distribu√≠da entre diferentes grupos de renda.\nO box plot mostra uma distribui√ß√£o muito desigual de acesso a oportunidades de emprego. Agora vamos ver o que podemos aprender sobre desigualdade e pobreza de acessibilidade nesta regi√£o com alguns indicadores",
    "crumbs": [
      "Calculando acessibilidade",
      "<span class='chapter-number'>6</span>¬† <span class='chapter-title'>Medidas de equidade</span>"
    ]
  },
  {
    "objectID": "3.3_equity_measures.html#raz√£o-de-palma",
    "href": "3.3_equity_measures.html#raz√£o-de-palma",
    "title": "6¬† Medidas de equidade",
    "section": "7.1 Raz√£o de Palma",
    "text": "7.1 Raz√£o de Palma\nA raz√£o de Palma √© calculada como a acessibilidade m√©dia dos 10% mais ricos dividida pela acessibilidade m√©dia dos 40% mais pobres. Valores do √çndice de Palma maiores que 1 indicam que a popula√ß√£o mais rica tem n√≠veis de acessibilidade mais altos do que a popula√ß√£o mais pobre, enquanto valores menores que 1 indicam a situa√ß√£o oposta.\nNo exemplo aqui, vemos que a popula√ß√£o mais rica pode acessar, em m√©dia, 3,8 vezes mais empregos do que a popula√ß√£o pobre.\n\npalma &lt;- palma_ratio(\n  accessibility_data = access_df,\n  sociodemographic_data = lud,\n  opportunity = \"jobs\",\n  population = \"population\",\n  income = \"income_per_capita\"\n  )\n\npalma\n\n   palma_ratio\n         &lt;num&gt;\n1:    3.800465",
    "crumbs": [
      "Calculando acessibilidade",
      "<span class='chapter-number'>6</span>¬† <span class='chapter-title'>Medidas de equidade</span>"
    ]
  },
  {
    "objectID": "3.3_equity_measures.html#√≠ndice-de-gini",
    "href": "3.3_equity_measures.html#√≠ndice-de-gini",
    "title": "6¬† Medidas de equidade",
    "section": "7.2 √çndice de Gini",
    "text": "7.2 √çndice de Gini\nProvavelmente, voc√™ n√£o deveria estar usando o √≠ndice de Gini para medir desigualdade de acessibilidade ;) (veja Karner, Pereira, e Farber 2024).",
    "crumbs": [
      "Calculando acessibilidade",
      "<span class='chapter-number'>6</span>¬† <span class='chapter-title'>Medidas de equidade</span>"
    ]
  },
  {
    "objectID": "3.3_equity_measures.html#√≠ndice-de-concentra√ß√£o",
    "href": "3.3_equity_measures.html#√≠ndice-de-concentra√ß√£o",
    "title": "6¬† Medidas de equidade",
    "section": "7.3 √çndice de concentra√ß√£o",
    "text": "7.3 √çndice de concentra√ß√£o\nO √≠ndice de concentra√ß√£o (CI) estima a extens√£o em que as desigualdades de acessibilidade est√£o sistematicamente associadas aos n√≠veis socioecon√¥micos dos indiv√≠duos. Os valores do CI podem variar teoricamente entre -1 e 1 (quando toda a acessibilidade est√° concentrada na pessoa mais ou menos favorecida, respectivamente). Valores negativos indicam que as desigualdades favorecem os pobres, enquanto valores positivos indicam um vi√©s pr√≥-rico.\n\nci &lt;- accessibility::concentration_index(\n  accessibility_data = access_df,\n  sociodemographic_data = lud,\n  opportunity = \"jobs\",\n  population = \"population\",\n  income = \"income_per_capita\",\n  type = \"corrected\"\n  )\n\nci\n\n   concentration_index\n                 &lt;num&gt;\n1:           0.3346494",
    "crumbs": [
      "Calculando acessibilidade",
      "<span class='chapter-number'>6</span>¬† <span class='chapter-title'>Medidas de equidade</span>"
    ]
  },
  {
    "objectID": "3.3_equity_measures.html#medidas-de-pobreza-foster-greer-thorbecke-fgt",
    "href": "3.3_equity_measures.html#medidas-de-pobreza-foster-greer-thorbecke-fgt",
    "title": "6¬† Medidas de equidade",
    "section": "8.1 Medidas de pobreza Foster-Greer-Thorbecke (FGT)",
    "text": "8.1 Medidas de pobreza Foster-Greer-Thorbecke (FGT)\nA fun√ß√£o fgt_poverty() calcula as m√©tricas FGT, uma fam√≠lia de medidas de pobreza originalmente proposta por Foster, Greer, e Thorbecke (1984), e que pode ser usada para captar a extens√£o e a gravidade da pobreza de uma distribui√ß√£o de acessibilidade. A fam√≠lia FGT √© composta por tr√™s medidas:\n\nFGT0: captura a extens√£o da pobreza como uma simples contagem - ou seja, a propor√ß√£o de pessoas abaixo da linha de pobreza;\nFGT1: tamb√©m conhecido como ‚Äú√≠ndice de gap de pobreza‚Äù, captura a gravidade da pobreza como a dist√¢ncia percentual m√©dia entre a linha de pobreza e a acessibilidade dos indiv√≠duos abaixo dessa linha;\nFGT2: simultaneamente capta a extens√£o e a gravidade da pobreza, calculando o n√∫mero de pessoas abaixo da linha de pobreza ponderado pelo tamanho do d√©ficit de acessibilidade em rela√ß√£o √† linha de pobreza.\n\nEssa fun√ß√£o inclui um par√¢metro adicional poverty_line, usado para definir a linha de pobreza abaixo da qual os indiv√≠duos s√£o considerados em situa√ß√£o de pobreza de acessibilidade. Para o prop√≥sito deste exerc√≠cio, consideraremos o percentil mais baixo de 25% de acesso como nossa linha de pobreza, que neste exemplo √© aproximadamente 23 mil empregos.\n\n\n\n\n\n\nLembrete r√°pido de que a defini√ß√£o de uma linha de pobreza de acessibilidade √©, em √∫ltima an√°lise, uma decis√£o moral e pol√≠tica e n√£o simplesmente uma quest√£o emp√≠rica ou t√©cnica (Pereira, Schwanen, e Banister 2017; Lucas et al. 2019).\n\n\n\n\n# get the 25th percentile of access\nquant25 &lt;- quantile(access_df$jobs, .25)\n\npoverty &lt;- fgt_poverty(\n  accessibility_data =  access_df,\n  sociodemographic_data = lud,\n  opportunity = \"jobs\",\n  population = \"population\",\n  poverty_line = quant25\n  )\n\npoverty\n\n        FGT0       FGT1       FGT2\n       &lt;num&gt;      &lt;num&gt;      &lt;num&gt;\n1: 0.1478675 0.04948043 0.02862334\n\n\nInterpreta√ß√£o r√°pida:\n\nFGT0: 14,8% da popula√ß√£o est√° em situa√ß√£o de pobreza de acessibilidade\nFGT1: a acessibilidade daqueles em situa√ß√£o de pobreza de acessibilidade √©, em m√©dia, 5% menor que a linha de pobreza\nFGT2: n√£o possui uma interpreta√ß√£o direta, mas pode-se dizer que o n√≠vel/intensidade geral de pobreza √© de 2,8%.\n\n\n\n\n\nFoster, James, Joel Greer, e Erik Thorbecke. 1984. ¬´A Class of Decomposable Poverty Measures¬ª. Econometrica 52 (3): 761‚Äì66. https://doi.org/10.2307/1913475.\n\n\nKarner, Alex, Rafael H. M. Pereira, e Steven Farber. 2024. ¬´Advances and Pitfalls in Measuring Transportation Equity¬ª. Transportation, janeiro. https://doi.org/10.1007/s11116-023-10460-7.\n\n\nLucas, Karen, Karel Martens, Floridea Di Ciommo, e Ariane Dupont-Kieffer. 2019. Measuring transport equity. Elsevier.\n\n\nPereira, Rafael H. M., Tim Schwanen, e David Banister. 2017. ¬´Distributive Justice and Equity in Transportation¬ª. Transport Reviews 37 (2): 170‚Äì91. https://doi.org/10.1080/01441647.2016.1257660.",
    "crumbs": [
      "Calculando acessibilidade",
      "<span class='chapter-number'>6</span>¬† <span class='chapter-title'>Medidas de equidade</span>"
    ]
  },
  {
    "objectID": "4_aopdata_acessibilidade.html",
    "href": "4_aopdata_acessibilidade.html",
    "title": "7¬† Dados do Projeto Acesso a Oportunidades",
    "section": "",
    "text": "7.1 Mapa do tempo para acessar o hospital mais pr√≥ximo\nNos cap√≠tulos anteriores, aprendemos como calcular medidas de acessibilidade urbana usando R. Nesta √∫ltima parte da oficina, apresentaremos a base de dados com estimativas de acessibilidade criada e disponibilizada pelo Lab de Acesso a Oportunidades (AOP) do Ipea. O pacote {aopdata} permite baixar, por exemplo, estimativas de acesso a empregos e a servi√ßos de sa√∫de, de educa√ß√£o e de assist√™ncia social para 2017, 2018 e 2019 nas maiores cidades do Brasil.\nTodas as bases de dados criadas pelo projeto AOP est√£o dispon√≠veis para download em seu site ou pelo pacote de R {aopdata}. O dicion√°rio de dados pode ser acessado online[^aop_data_dictionary] ou, em uma sess√£o de R, com o comando aopdata::aopdata_dictionary(lang = \"pt\").\nAs estimativas de acessibilidade podem ser baixadas com a fun√ß√£o aopdata::read_access(), que funciona de maneira an√°loga √† outras fun√ß√µes do pacote read_population() e read_landuse(). Al√©m de indicar a cidade (par√¢metro city) e o ano de refer√™ncia (year), no entanto, √© necess√°rio tamb√©m informar o modo de transporte (mode) e o intervalo do dia (pico, entre 6h e 8h, ou fora-pico, entre 14h e 16h, controlado pelo par√¢metro peak).\nNo exemplo a seguir, mostramos como baixar estimativas de acessibilidade no per√≠odo de pico em S√£o Paulo referentes a 2019. Nesse exemplo, baixamos as estimativas de acessibilidade tanto por autom√≥vel quanto por transporte p√∫blico e as unimos em um √∫nico data.frame. Note que essa fun√ß√£o resulta em uma tabela que traz tamb√©m, automaticamente, os dados de popula√ß√£o e de uso do solo.\nComo podemos ver, assim como nos casos das tabelas de dados sociodemogr√°ficos e de uso do solo, os nomes das vari√°veis de estimativas de acessibilidade est√£o organizados em c√≥digos, como CMAEF30, TMISB e CMPPM60. Esses c√≥digos s√£o resultado da combina√ß√£o de tr√™s componentes, conforme descrito a seguir.\nNo caso do indicador de acessibilidade passiva, as letras no meio do nome da vari√°vel indicam a qual grupo populacional os n√≠veis de acessibilidade se referem:\nExemplos:\nA descri√ß√£o completa das vari√°veis tamb√©m pode ser consultada na documenta√ß√£o da fun√ß√£o, rodando em uma sess√£o de R o comando ?read_access. As subse√ß√µes a seguir mostram exemplos de visualiza√ß√µes desses dados em forma de mapas e gr√°ficos.\nNeste exemplo, comparamos o tempo de acesso por autom√≥vel e por transporte p√∫blico at√© o hospital mais pr√≥ximo de cada hex√°gono. Para analisar o tempo m√≠nimo de viagem (TMI) at√© hospitais de alta complexidade (SA), utilizamos a vari√°vel TMISA. Com o c√≥digo a seguir, carregamos as bibliotecas de visualiza√ß√£o de dados e apresentamos a distribui√ß√£o espacial do tempo de acesso com os dois modos de transporte. Como os tempos de viagem por transporte p√∫blico costumam ser muito mais longos do que por autom√≥vel, truncamos a distribui√ß√£o dos valores da vari√°vel em sessenta minutos.\nlibrary(ggplot2)\nlibrary(patchwork)\n\n# trunca os tempos de viagem em 60 minutos\ndados_sp$TMISA &lt;- ifelse(dados_sp$TMISA &gt; 60, 60, dados_sp$TMISA)\n\nggplot(subset(dados_sp, !is.na(mode))) +\n  geom_sf(aes(fill = TMISA), color = NA, alpha = 0.9) +\n  scale_fill_viridis_c(\n    option = \"cividis\",\n    direction = -1,\n    breaks = seq(0, 60, 10),\n    labels = c(seq(0, 50, 10), \"60+\")\n  ) +\n  labs(fill = \"Tempo (em\\nminutos)\") +\n  facet_wrap(\n    ~ mode,\n    labeller = as_labeller(\n      c(car = \"Carro\", public_transport = \"Transporte p√∫blico\")\n    )\n  ) +\n  theme_void()\n\n\n\n\n\n\n\nFigura¬†7.1: Tempo de viagem at√© o hospital de alta complexidade mais pr√≥ximo em S√£o Paulo",
    "crumbs": [
      "Dados do Projeto Acesso a Oportunidades",
      "<span class='chapter-number'>7</span>¬† <span class='chapter-title'>Dados do Projeto Acesso a Oportunidades</span>"
    ]
  },
  {
    "objectID": "4_aopdata_acessibilidade.html#mapa-da-quantidade-de-empregos-acess√≠veis",
    "href": "4_aopdata_acessibilidade.html#mapa-da-quantidade-de-empregos-acess√≠veis",
    "title": "7¬† Dados do Projeto Acesso a Oportunidades",
    "section": "7.2 Mapa da quantidade de empregos acess√≠veis",
    "text": "7.2 Mapa da quantidade de empregos acess√≠veis\nOs dados do {aopdata} tamb√©m tornam muito simples a compara√ß√£o da quantidade de oportunidades acess√≠veis em diferentes tempos de viagem. Com o c√≥digo a seguir, por exemplo, ilustramos como visualizar lado a lado as distribui√ß√µes espaciais do n√∫mero de empregos acess√≠veis em at√© sessenta e noventa minutos de viagem, respectivamente, por transporte p√∫blico.\n\n# estabelece valores usados na legenda do mapa\nlimites_legenda &lt;- c(0, max(acesso_tp$CMATT90, na.rm = TRUE) / 1000000)\n\n# configura os mapas\n\nfig60 &lt;- ggplot(subset(acesso_tp, !is.na(mode))) +\n  geom_sf(aes(fill = CMATT60 / 1000000), color = NA, alpha = 0.9) +\n  scale_fill_viridis_c(option = \"inferno\", limits = limites_legenda) +\n  labs(\n    subtitle = \"At√© sessenta minutos de viagem\",\n    fill = \"Empregos\\n(em milh√µes)\"\n  ) +\n  theme_void()\n\nfig90 &lt;- ggplot(subset(acesso_tp, !is.na(mode))) +\n  geom_sf(aes(fill = CMATT90 / 1000000), color = NA, alpha = 0.9) +\n  scale_fill_viridis_c(option = \"inferno\", limits = limites_legenda) +\n  labs(\n    subtitle = \"At√© noventa minutos de viagem\",\n    fill = \"Empregos\\n(em milh√µes)\"\n  ) +\n  theme_void()\n\nfig60 + fig90 + plot_layout(guides = \"collect\")\n\n\n\n\n\n\n\nFigura¬†7.2: Quantidade de empregos acess√≠veis por transporte p√∫blico em S√£o Paulo",
    "crumbs": [
      "Dados do Projeto Acesso a Oportunidades",
      "<span class='chapter-number'>7</span>¬† <span class='chapter-title'>Dados do Projeto Acesso a Oportunidades</span>"
    ]
  },
  {
    "objectID": "4_aopdata_acessibilidade.html#desigualdades-de-acesso-a-oportunidades",
    "href": "4_aopdata_acessibilidade.html#desigualdades-de-acesso-a-oportunidades",
    "title": "7¬† Dados do Projeto Acesso a Oportunidades",
    "section": "7.3 Desigualdades de acesso a oportunidades",
    "text": "7.3 Desigualdades de acesso a oportunidades\nExistem diversas maneiras de analisar qu√£o desiguais s√£o as condi√ß√µes de acesso a oportunidades nas cidades brasileiras a partir dos dados do {aopdata}. Nesta subse√ß√£o, apresentamos tr√™s exemplos deste tipo de an√°lise.\n\n7.3.1 Desigualdade no tempo de acesso a oportunidades\nNeste primeiro exemplo, vamos comparar o tempo m√©dio de viagem at√© o hospital p√∫blico mais pr√≥ximo de pessoas de diferentes n√≠veis de renda. Para isso, calculamos o tempo m√©dio de acesso a estabelecimentos de sa√∫de de alta complexidade ponderado pela popula√ß√£o de cada c√©lula da nossa grade espacial. Essa pondera√ß√£o √© necess√°ria porque cada c√©lula, por abrigar um n√∫mero de pessoas diferente das demais, contribui de forma diferente para a m√©dia da popula√ß√£o como um todo.\nAntes de realizar o c√°lculo, cabe observar que algumas c√©lulas da cidade n√£o conseguem acessar nenhum hospital em at√© duas horas de viagem. Nesses casos, o valor das vari√°veis de tempo m√≠nimo de viagem √© infinito (Inf). Para lidar com isso, neste exemplo substitu√≠mos todos os valores Inf por um tempo de viagem de 120 minutos.\n\n# copia os dados de acesso em um novo dataframe\ndesigualdade_tp &lt;- data.table::as.data.table(acesso_tp)\n\n# substitui os valores Inf por 120\ndesigualdade_tp[, TMISA := ifelse(is.infinite(TMISA), 120, TMISA)]\n\n# calcula o tempo de viagem m√©dio por decil de renda\ndesigualdade_tp &lt;- desigualdade_tp[\n  ,\n  .(media = weighted.mean(x = TMISA, w = P001, na.rm = TRUE)),\n  by = R003\n]\ndesigualdade_tp &lt;- subset(desigualdade_tp, !is.na(media))\n\nggplot(desigualdade_tp) +\n  geom_col(aes(y = media, x = factor(R003)), fill = \"#2c9e9e\", color = NA) +\n  scale_x_discrete(\n    labels = c(\"D1\\nmais\\npobres\", paste0(\"D\", 2:9), \"D10\\nmais\\nricos\")\n  ) +\n  labs(x = \"Decil de renda\", y = \"Tempo de viagem (em minutos)\") +\n  theme_minimal()\n\n\n\n\n\n\n\nFigura¬†7.3: M√©dia de tempo de viagem por transporte p√∫blico em S√£o Paulo at√© o hospital mais pr√≥ximo\n\n\n\n\n\n\n\n7.3.2 Desigualdade no n√∫mero de oportunidades acess√≠veis\nOutra maneira de examinar a desigualdade de acesso a oportunidades √© comparar a quantidade de oportunidades acess√≠veis por diferentes grupos populacionais considerando os mesmos modos de transporte e limites de tempo de viagem. Nesse caso, analisamos o indicador de acessibilidade cumulativa ativa, representado por vari√°veis cujos c√≥digos come√ßam com CMA na base de dados do {aopdata}. No exemplo a seguir, comparamos a quantidade de empregos acess√≠veis por pessoas de diferentes decis de renda, considerando viagens de transporte p√∫blico limitadas em sessenta minutos de viagem.\n\nggplot(subset(acesso_tp, !is.na(R003))) +\n  geom_boxplot(\n    aes(x = factor(R003), y = CMATT60 / 1000000, color = factor(R003))\n  ) +\n  scale_color_brewer(palette = \"RdBu\") +\n  labs(\n    color = \"Decil\\nde renda\",\n    x = \"Decil de renda\",\n    y = \"Empregos acess√≠veis (em milh√µes)\"\n  ) +\n  scale_x_discrete(\n    labels = c(\"D1\\nmais\\npobres\", paste0(\"D\", 2:9), \"D10\\nmais\\nricos\")\n  ) +\n  theme_minimal()\n\n\n\n\n\n\n\nFigura¬†7.4: Distribui√ß√£o do n√∫mero de empregos acess√≠veis por transporte p√∫blico em S√£o Paulo\n\n\n\n\n\nPor fim, podemos tamb√©m comparar como o uso de diferentes modos de transporte resulta em diferentes n√≠veis de acessibilidade para a popula√ß√£o e como essa diferen√ßa varia entre cidades. No exemplo a seguir, comparamos a quantidade de empregos acess√≠veis em at√© trinta minutos de viagem a p√© e de carro. Para isso, precisamos primeiro baixar os dados de acessibilidade por ambos os modos para todas as cidades do projeto.\n\ndados_carro &lt;- aopdata::read_access(\n  city = \"all\",\n  mode = \"car\",\n  year = 2019,\n  showProgress = FALSE\n)\n\ndados_caminhada &lt;- aopdata::read_access(\n  city = \"all\",\n  mode = \"walk\",\n  year = 2019,\n  showProgress = FALSE\n)\n\nEm seguida, calculamos para cada cidade e para cada modo de transporte a m√©dia ponderada do n√∫mero de empregos acess√≠veis em at√© trinta minutos (CMATT30). Feito isso, juntamos essas estimativas em uma √∫nica tabela e calculamos a raz√£o entre os n√≠veis de acessibilidade por carro e os n√≠veis de acessibilidade a p√©.\n\n# calcula a m√©dia de empregos acess√≠veis em 30 minutos\n\nmedia_carro &lt;- dados_carro[\n  ,\n  .(acesso_carro = weighted.mean(CMATT30, w = P001, na.rm = TRUE)),\n  by = name_muni\n]\n\nmedia_caminhada &lt;- dados_caminhada[\n  ,\n  .(acesso_caminhada = weighted.mean(CMATT30, w = P001, na.rm = TRUE)),\n  by = name_muni\n]\n\n# junta os dados e calcula a raz√£o entre o n√≠vel de acesso por carro e a p√©\nmedia_acesso &lt;- merge(media_carro, media_caminhada)\nmedia_acesso[, razao := acesso_carro / acesso_caminhada]\n\nhead(media_acesso)\n\nKey: &lt;name_muni&gt;\n        name_muni acesso_carro acesso_caminhada    razao\n           &lt;char&gt;        &lt;num&gt;            &lt;num&gt;    &lt;num&gt;\n1:          Belem     155270.4         9392.235 16.53179\n2: Belo Horizonte     529890.0        12464.233 42.51284\n3:       Brasilia     220575.9         4110.703 53.65892\n4:       Campinas     256333.1         6748.923 37.98133\n5:   Campo Grande     172680.5         4181.209 41.29919\n6:       Curitiba     494376.9        10471.135 47.21331\n\n\nFinalmente, podemos visualizar os resultados graficamente:\n\nggplot(media_acesso, aes(x = razao, y = reorder(name_muni, razao))) +\n  geom_bar(stat = \"identity\") +\n  geom_text(aes(x = razao + 3 , label = paste0(round(razao), \"x\"))) +\n  labs(y = NULL, x = \"Raz√£o entre a acessibilidade de carro e a p√©\") +\n  theme_classic()\n\n\n\n\n\n\n\nFigura¬†7.5: Diferen√ßa entre a quantidade de empregos acess√≠veis por autom√≥vel e por caminhada em at√© trinta minutos de viagem nas vinte maiores cidades do Brasil\n\n\n\n\n\nComo esperado, a Figura¬†7.5 mostra que √© poss√≠vel acessar muito mais empregos em at√© 30 minutos com viagens de carro do que com viagens a p√©. Essa diferen√ßa, por√©m, varia muito entre cidades. Em S√£o Paulo e em Bras√≠lia, viagens de autom√≥vel de at√© trinta minutos permitem acessar, em m√©dia, um n√∫mero de empregos 54 vezes maior do que viagens a p√© de mesma dura√ß√£o. Em Bel√©m, onde observamos a menor diferen√ßa, o autom√≥vel permite acessar 17 vezes mais empregos do que a caminhada - raz√£o ainda consider√°vel, por√©m menor do que a das demais cidades.",
    "crumbs": [
      "Dados do Projeto Acesso a Oportunidades",
      "<span class='chapter-number'>7</span>¬† <span class='chapter-title'>Dados do Projeto Acesso a Oportunidades</span>"
    ]
  },
  {
    "objectID": "references.html",
    "href": "references.html",
    "title": "Refer√™ncias bibliogr√°ficas",
    "section": "",
    "text": "Conway, Matthew Wigginton, Andrew Byrd, and Marco van der Linden. 2017.\n‚ÄúEvidence-Based Transit and Land Use Sketch\nPlanning Using Interactive Accessibility Methods on\nCombined Schedule and Headway-Based\nNetworks.‚Äù Transportation Research Record: Journal of\nthe Transportation Research Board 2653 (1): 45‚Äì53. https://doi.org/10.3141/2653-06.\n\n\nFoster, James, Joel Greer, and Erik Thorbecke. 1984. ‚ÄúA\nClass of Decomposable Poverty\nMeasures.‚Äù Econometrica 52 (3): 761‚Äì66. https://doi.org/10.2307/1913475.\n\n\nHiggins, Christopher, Matthew Palm, Amber DeJohn, Luna Xi, James\nVaughan, Steven Farber, Michael Widener, and Eric Miller. 2022.\n‚ÄúCalculating Place-Based Transit Accessibility:\nMethods, Tools and Algorithmic Dependence.‚Äù\nJournal of Transport and Land Use 15 (1). https://doi.org/10.5198/jtlu.2022.2012.\n\n\nKarner, Alex, Rafael H. M. Pereira, and Steven Farber. 2024.\n‚ÄúAdvances and Pitfalls in Measuring Transportation Equity.‚Äù\nTransportation, January. https://doi.org/10.1007/s11116-023-10460-7.\n\n\nLevinson, David, and David King. 2020. Transport Access Manual:\nA Guide for Measuring Connection Between People and\nPlaces. Committee of the Transport Access Manual, University\nof Sydney. https://ses.library.usyd.edu.au/handle/2123/23733.\n\n\nLucas, Karen, Karel Martens, Floridea Di Ciommo, and Ariane\nDupont-Kieffer. 2019. Measuring Transport Equity. Elsevier.\n\n\nPereira, Rafael H. M. 2019. ‚ÄúFuture Accessibility Impacts of\nTransport Policy Scenarios: Equity and Sensitivity to Travel Time\nThresholds for Bus Rapid Transit Expansion in Rio de Janeiro.‚Äù\nJournal of Transport Geography 74: 321‚Äì32. https://doi.org/https://doi.org/10.1016/j.jtrangeo.2018.12.005.\n\n\nPereira, Rafael H. M., and Daniel Herszenhut. 2023. Introduction to\nUrban Accessibility: A Practical Guide with r. 1st ed. Instituto de\nPesquisa Econ√¥mica Aplicada (Ipea). https://doi.org/10.38116/9786556350653.\n\n\nPereira, Rafael H. M., Marcus Saraiva, Daniel Herszenhut, Carlos Kaue\nVieira Braga, and Matthew Wigginton Conway. 2021. ‚ÄúR5r:\nRapid Realistic Routing on Multimodal Transport\nNetworks with R5 in\nR.‚Äù Transport Findings, March, 21262. https://doi.org/10.32866/001c.21262.\n\n\nPereira, Rafael H. M., Tim Schwanen, and David Banister. 2017.\n‚ÄúDistributive Justice and Equity in Transportation.‚Äù\nTransport Reviews 37 (2): 170‚Äì91. https://doi.org/10.1080/01441647.2016.1257660.\n\n\nTomasiello, Diego Bogado, Daniel Herszenhut, Jo√£o Lucas Albuquerque\nOliveira, Carlos Kaue Vieira Braga, and Rafael H. M. Pereira. 2023.\n‚ÄúA Time Interval Metric for Cumulative Opportunity\nAccessibility.‚Äù Applied Geography 157 (August): 103007.\nhttps://doi.org/10.1016/j.apgeog.2023.103007.",
    "crumbs": [
      "Refer√™ncias bibliogr√°ficas"
    ]
  }
]